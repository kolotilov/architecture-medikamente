# Задание 3. Оценка Data Encryption at Rest and In Transit

## Цель

Разработать стратегию защиты данных при хранении (Data at Rest) и передаче (Data in Transit), с учётом классификации по чувствительности, рискам и состояниям, в соответствии с принципами Privacy by Design.

---

## 1. Классификация данных

| Категория данных                 | Примеры                                         | Чувствительность | Состояние                | Риски                                     |
|----------------------------------|-------------------------------------------------|------------------|--------------------------|-------------------------------------------|
| Персональные данные (PII)        | ФИО, дата рождения, контакты, адрес             | Высокая          | At Rest, In Transit      | Утечка, нарушение ФЗ-152, штрафы          |
| Медицинские данные (PHI)         | Диагнозы, история болезни, назначения           | Очень высокая    | At Rest, In Transit, Use | Нарушение врачебной тайны, репутационные  |
| Финансовые данные                | История оплат, реквизиты, квитанции             | Средняя/высокая  | At Rest, In Transit      | Мошенничество, нарушение закона           |
| Аутентификационные данные        | Логины, пароли, API-ключи                       | Очень высокая    | At Rest, In Transit      | Несанкционированный доступ                |
| Журналы доступа и операций       | Логи, действия пользователей                    | Средняя          | At Rest                  | Инциденты, отсутствие следов              |
| Данные склада / ТМЦ              | Расходные материалы, учёт                       | Средняя          | At Rest                  | Коммерческие потери                       |
| Данные аналитики (обезличенные) | BI отчеты, тренды                               | Средняя/низкая   | In Use                   | Нарушение анонимности при ошибке          |
| Согласия пациентов               | Документы согласия, отзыв согласия              | Очень высокая    | At Rest, In Use          | Нарушение законов, GDPR / ФЗ-152          |

---

## 2. Методы защиты данных

### Данные в покое (Data at Rest)

| Метод                                | Применение                                               |
|--------------------------------------|-----------------------------------------------------------|
| AES-256 шифрование                   | Основные БД, файловое хранилище                           |
| Transparent Data Encryption (TDE)    | Основная медицинская система                             |
| Полное шифрование дисков (FDE)       | Серверы, сканы, документы                                 |
| Column-level encryption              | Медицинские и финансовые поля                            |
| Статическая маскировка               | Тестовые среды                                            |
| Псевдонимизация                      | BI-аналитика                                              |
| Управление ключами (Vault/KMS)       | Ротация, централизованный доступ                          |

### Данные в передаче (Data in Transit)

| Метод                                | Применение                                               |
|--------------------------------------|-----------------------------------------------------------|
| TLS 1.3 / HTTPS                      | Все внешние и внутренние соединения                      |
| mTLS (взаимная аутентификация)       | Системные интеграции                                     |
| VPN / IPSec                          | Межфилиальные каналы                                     |
| Field-level encryption               | Передача PHI/PII в API                                   |
| Tokenization                         | Передача реквизитов, контактов                           |

### Данные в использовании (Data in Use)

| Метод                         | Применение                                       |
|-------------------------------|--------------------------------------------------|
| Runtime Data Masking          | Маскирование в зависимости от роли              |
| Trusted Execution Environment | Безопасная аналитика                             |
| Псевдонимизация               | BI-платформы                                     |

---

## 3. Автоматизированный контроль

### Мониторинг и аудит

| Система                 | Функции                                                                 |
|-------------------------|--------------------------------------------------------------------------|
| SIEM (Splunk / Elastic) | Аудит доступа, корреляция событий                                       |
| DLP                     | Обнаружение PII/PHI, блокировка утечек                                  |
| Vault / KMS             | Аудит ключей, логирование, ротация                                      |

### Тегирование и автоматизация

| Инструмент             | Назначение                                                               |
|------------------------|--------------------------------------------------------------------------|
| Microsoft Purview      | Классификация, автообнаружение, лейблы                                   |
| Apache Atlas           | Data Lineage, визуализация потоков                                       |
| RBAC + ABAC            | Доступ по ролям и атрибутам (включая теги данных)                        |
| Жизненный цикл данных  | Автоархивация, автоудаление временных или устаревших данных              |

---

## 4. Реестр программных и аппаратных средств

| Категория                  | Примеры инструментов                                  |
|----------------------------|--------------------------------------------------------|
| Шифрование данных          | AES-256, PostgreSQL TDE, BitLocker, OpenSSL           |
| Управление ключами         | HashiCorp Vault, AWS KMS, HSM                         |
| API-безопасность           | mTLS, OAuth 2.0, API Gateway (Kong, NGINX)            |
| Логирование и аудит        | Splunk, Elastic, Fluentbit                            |
| DLP                        | Microsoft Purview, IBM Guardium, Symantec DLP         |
| Тегирование и классификация| Apache Atlas, BigID, Collibra                         |
| Мониторинг                 | Prometheus + Grafana                                  |

---

## Вывод

Принятая стратегия охватывает все ключевые состояния данных:

- **В покое (At Rest):** шифрование на уровне БД, файлов и дисков.
- **В передаче (In Transit):** защищённые соединения и защита полей.
- **В использовании (In Use):** динамическое маскирование и Trusted Zones.
- **Контроль и аудит:** через SIEM, DLP, мониторинг доступа и тегирование.
- **Соблюдение законодательства:** соответствие требованиям ФЗ-152, GDPR и принципам Privacy by Design.
